<nav>
  <div class="nav__brand">
    <a class="brand">
      @if (orgLogoUrl) {
        <img
          [src]="orgLogoUrl"
          [alt]="orgName || 'Company Logo'"
          class="brand__logo"
          loading="eager"
          decoding="async"
        />
      }
      <span class="brand__name">{{ orgName || "Company Name" }}</span>
    </a>
  </div>

  <ul class="nav__links">
    @for (item of navItems; track item.label) {
      <li [class.nav__item--group]="isGroup(item)">
        @if (isGroup(item)) {
          <div class="nav__group">
            <div class="nav__group-label">{{ item.label }}</div>
            <ul class="nav__group-links">
              @for (child of item.children; track child.label) {
                <li>
                  <a [routerLink]="child.path" routerLinkActive="active">
                    {{ child.label }}
                  </a>
                </li>
              }
            </ul>
          </div>
        } @else {
          <a [routerLink]="item.path" routerLinkActive="active">{{
            item.label
          }}</a>
        }
      </li>
    }
  </ul>

  <div class="nav__actions" *ngIf="user$ | async as user">
    <div class="nav__actions--user">
      {{ user.displayName }} Â· L{{ user.permissionLevel }}
    </div>
    <cg-dropdown-menu
      menuLabel="Account Options"
      iconPath="more-vertical.svg"
      horizontal
      iconOnly
    >
      <cg-dropdown-menu-item routerLink="/settings" routerLinkActive="active"
        >Settings</cg-dropdown-menu-item
      >
      <cg-dropdown-menu-item (onClick)="logout()"
        >Sign out</cg-dropdown-menu-item
      >
    </cg-dropdown-menu>
  </div>
</nav>
