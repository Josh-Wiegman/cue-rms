<nav [class.nav--closed]="!sidebarIsOpen">
  <div class="nav__header">
    <a routerLink="">
      <!-- <img
        [src]="orgLogoUrl"
        [alt]="orgName || 'Company Logo'"
        class="nav__header__logo"
        loading="eager"
        decoding="async"
      /> -->
      <img
        src="images.png"
        [alt]="orgName || 'Company Logo'"
        class="nav__header__logo"
        loading="eager"
        decoding="async"
      />

      @if (sidebarIsOpen) {
        <span class="nav__header__title">{{ orgName || "Company Name" }}</span>
      }
    </a>
  </div>

  <div class="nav__main-navigation">
    <span class="nav__main-navigation__title">
      @if (sidebarIsOpen) {
        <p>Navigation</p>
      }
      <svg (click)="toggleSidebar()">
        <use [attr.href]="'icons/sidebar.svg'" />
        <desc>Collapse</desc>
      </svg>
    </span>

    <ul class="nav__main-navigation__items">
      @for (item of navItems; track item.label) {
        <li>
          @if (isGroup(item)) {
            <div
              class="nav__sub-navigation"
              [class.nav__sub-navigation--open]="isOpen(item)"
            >
              <span
                class="nav__sub-navigation__title"
                (click)="
                  sidebarIsOpen ? toggleSubGroup(item) : toggleSidebar(item)
                "
              >
                <svg (click)="toggleSidebar()">
                  <use [attr.href]="'icons/sidebar.svg'" />
                  <desc>{{ item.label }}</desc>
                </svg>
                @if (sidebarIsOpen) {
                  <p>{{ item.label }}</p>

                  <svg>
                    <use [attr.href]="'icons/chevron-down.svg'" />
                    <desc>More</desc>
                  </svg>
                }
              </span>
              <ul class="nav__sub-navigation__items">
                @for (child of item.children; track child.label) {
                  <li>
                    <a [routerLink]="child.path" routerLinkActive="active">{{
                      child.label
                    }}</a>
                  </li>
                }
              </ul>
            </div>
          } @else {
            <a [routerLink]="item.path" routerLinkActive="active">
              <svg (click)="toggleSidebar()">
                <use [attr.href]="'icons/sidebar.svg'" />
                <desc>{{ item.label }}</desc>
              </svg>
              @if (sidebarIsOpen) {
                <p>{{ item.label }}</p>
              }
            </a>
          }
        </li>
      }
    </ul>
  </div>

  <div class="nav__actions" *ngIf="user$ | async as user">
    @if (sidebarIsOpen) {
      <div class="nav__actions__user-info">
        {{ user.displayName }} Â· L{{ user.permissionLevel }}
      </div>
    }
    <cg-dropdown-menu
      menuLabel="Account Options"
      iconPath="more-vertical.svg"
      horizontal
      iconOnly
    >
      <cg-dropdown-menu-item routerLink="/settings" routerLinkActive="active"
        >Settings</cg-dropdown-menu-item
      >
      <cg-dropdown-menu-item (onClick)="logout()"
        >Sign out</cg-dropdown-menu-item
      >
    </cg-dropdown-menu>
  </div>
</nav>
