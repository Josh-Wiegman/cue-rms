<ui-shell>
  <content class="sales-content">
    <div class="sales-header">
      <div>
        <p class="eyebrow">Commercial</p>
        <h1>Sales Orders</h1>
        <p class="subtitle">
          Search, filter, and drill into sales orders across all branches.
        </p>
      </div>
      <button class="secondary" type="button" (click)="clearFilters()">
        Clear filters
      </button>
    </div>

    <div class="filters">
      <input
        type="search"
        placeholder="Search by sales order, title, or account manager"
        [(ngModel)]="searchTerm"
      />

      <label class="inline-control">
        <span>Branch</span>
        <select [(ngModel)]="branchFilter">
          <option *ngFor="let branch of branches" [value]="branch">
            {{ branch }}
          </option>
        </select>
      </label>

      <label class="inline-control">
        <span>Start from</span>
        <input type="date" [(ngModel)]="dateFrom" />
      </label>

      <label class="inline-control">
        <span>End by</span>
        <input type="date" [(ngModel)]="dateTo" />
      </label>
    </div>

    <div class="table-wrapper" *ngIf="filteredOrders.length; else emptyState">
      <table>
        <thead>
          <tr>
            <th>Sales Order #</th>
            <th>Title</th>
            <th>Account Manager</th>
            <th>Start Date</th>
            <th>End Date</th>
            <th>Branch</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr
            *ngFor="let order of filteredOrders"
            [routerLink]="['/sales', order.orderNumber]"
          >
            <td>{{ order.orderNumber }}</td>
            <td>{{ order.title }}</td>
            <td>{{ order.accountManager }}</td>
            <td>{{ order.startDate | date: 'dd MMM yyyy' }}</td>
            <td>{{ order.endDate | date: 'dd MMM yyyy' }}</td>
            <td>{{ order.branch }}</td>
            <td>{{ order.status }}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <ng-template #emptyState>
      <div class="empty-state">
        <p>No sales orders match your filters.</p>
      </div>
    </ng-template>
  </content>
</ui-shell>
