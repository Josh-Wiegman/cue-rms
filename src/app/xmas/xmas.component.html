<div class="scene" aria-label="Christmas Present Hunt">
  <div class="title">{{ titleText }}</div>

  <!-- snow -->
  <div class="snow-container" id="snowContainer" aria-hidden="true">
    <div
      class="snowflake"
      *ngFor="let s of snowflakes; trackBy: trackById"
      [style.left.%]="s.leftPct"
      [style.fontSize.em]="s.fontSizeEm"
      [style.animationDuration.s]="s.durationS"
      [style.animationDelay.s]="s.delayS"
    >
      ❄
    </div>
  </div>

  <!-- festoon -->
  <div class="festoon" id="festoon" aria-hidden="true">
    <div class="festoon-line"></div>
    <div
      class="festoon-bulb"
      *ngFor="let b of festoonBulbs; index as i"
      [style.left.%]="b.leftPct"
      [style.background]="b.color"
      [style.animationDelay.s]="b.delayS"
    ></div>
  </div>

  <!-- ground -->
  <div class="ground" aria-hidden="true"></div>

  <!-- trees + presents -->
  <div
    class="tree"
    *ngFor="let p of presents; trackBy: trackById"
    [style.left.%]="p.x"
    [style.bottom.%]="p.y"
  >
    <div
      class="present"
      [ngClass]="p.side"
      (click)="onPresentClick(p, $event)"
      [style.display]="p.opened ? 'none' : 'block'"
      role="button"
      tabindex="0"
      aria-label="Present"
    >
      <div class="present-bow"></div>
    </div>

    <div class="tree-container" aria-hidden="true">
      <div class="tree-star">★</div>
      <div class="tree-layer tree-layer-1"></div>
      <div class="tree-layer tree-layer-2"></div>
      <div class="tree-layer tree-layer-3"></div>
      <div class="tree-layer tree-layer-4"></div>
      <div class="tree-trunk"></div>

      <div
        class="tree-ornament"
        *ngFor="let o of p.ornaments"
        [style.background]="o.color"
        [style.left.%]="o.leftPct"
        [style.bottom.px]="o.bottomPx"
      ></div>

      <div
        class="tree-garland"
        *ngFor="let g of p.garlands"
        [style.width.px]="g.widthPx"
        [style.left]="'50%'"
        [style.transform]="'translateX(-50%)'"
        [style.bottom.px]="g.bottomPx"
      ></div>

      <div
        class="tree-light"
        *ngFor="let l of p.lights"
        [style.background]="l.color"
        [style.color]="l.color"
        [style.left.%]="l.leftPct"
        [style.bottom.px]="l.bottomPx"
        [style.animationDelay.s]="l.delayS"
      ></div>
    </div>
  </div>

  <!-- snowmen -->
  <div
    class="snowman"
    *ngFor="let sm of snowmen"
    [style.left.%]="sm.x"
    aria-hidden="true"
  >
    <div class="snowman-bottom"></div>
    <div class="snowman-middle">
      <div class="snowman-button" style="top: 10px"></div>
      <div class="snowman-button" style="top: 25px"></div>
    </div>
    <div class="snowman-head">
      <div class="snowman-eye left"></div>
      <div class="snowman-eye right"></div>
      <div class="snowman-nose"></div>
      <div class="snowman-hat"></div>
    </div>
  </div>

  <!-- santa sleigh (static markup, animated via CSS) -->
  <div class="santa-sleigh" aria-hidden="true">
    <div class="sleigh-container">
      <div class="reindeer">
        <div class="reindeer-body">
          <div class="reindeer-neck">
            <div class="reindeer-head">
              <div class="reindeer-ear left"></div>
              <div class="reindeer-ear right"></div>
              <div class="reindeer-antler left"></div>
              <div class="reindeer-antler right"></div>
              <div class="reindeer-eye left"></div>
              <div class="reindeer-eye right"></div>
              <div class="reindeer-nose"></div>
            </div>
          </div>
          <div class="reindeer-leg"></div>
          <div class="reindeer-leg"></div>
          <div class="reindeer-leg"></div>
          <div class="reindeer-leg"></div>
        </div>
        <div class="harness"></div>
      </div>

      <div class="reindeer">
        <div class="reindeer-body">
          <div class="reindeer-neck">
            <div class="reindeer-head">
              <div class="reindeer-ear left"></div>
              <div class="reindeer-ear right"></div>
              <div class="reindeer-antler left"></div>
              <div class="reindeer-antler right"></div>
              <div class="reindeer-eye left"></div>
              <div class="reindeer-eye right"></div>
            </div>
          </div>
          <div class="reindeer-leg"></div>
          <div class="reindeer-leg"></div>
          <div class="reindeer-leg"></div>
          <div class="reindeer-leg"></div>
        </div>
        <div class="harness"></div>
      </div>

      <div class="sleigh">
        <div class="sleigh-pattern"></div>
        <div class="sleigh-runner"></div>
        <div class="santa">
          <div class="santa-arm left"><div class="santa-hand"></div></div>
          <div class="santa-arm right"><div class="santa-hand"></div></div>

          <div class="santa-body">
            <div class="santa-belt"><div class="santa-buckle"></div></div>
          </div>

          <div class="santa-head">
            <div class="santa-hat">
              <div class="santa-hat-brim"></div>
              <div class="santa-hat-pompom"></div>
            </div>
            <div class="santa-eye left"></div>
            <div class="santa-eye right"></div>
            <div class="santa-nose"></div>
            <div class="santa-mustache"></div>
            <div class="santa-beard"></div>
          </div>
        </div>
        <div class="gift-sack"></div>
      </div>
    </div>
  </div>

  <!-- pop-up message -->
  <div
    class="message"
    *ngIf="activeMessage as m"
    [ngClass]="{ 'final-message': m.isFinal }"
    role="dialog"
    aria-live="polite"
  >
    {{ m.text }}
  </div>

  <!-- confetti -->
  <div
    class="celebration"
    *ngFor="let c of confetti; trackBy: trackById"
    [style.left.%]="c.leftPct"
    [style.background]="c.color"
    [style.animationDelay.s]="c.delayS"
    aria-hidden="true"
  ></div>

  <!-- stars -->
  <div
    class="star"
    *ngFor="let st of stars; trackBy: trackById"
    [style.left.%]="st.leftPct"
    [style.top.%]="st.topPct"
    [style.animationDelay.s]="st.delayS"
    aria-hidden="true"
  >
    ★
  </div>
</div>
